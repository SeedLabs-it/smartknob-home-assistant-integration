this.twind=this.twind||{},this.twind.withReact_readableStream=function(n){"use strict";function t(n,l,s,a){if(n===l)return n?[[0,n]]:[];if(null!=s){var c=function(n,t,e){var r="number"==typeof e?{index:e,length:0}:e.oldRange,i="number"==typeof e?null:e.newRange,l=n.length,s=t.length;if(0===r.length&&(null===i||0===i.length)){var u=r.index,g=n.slice(0,u),a=n.slice(u),c=i?i.index:null;n:{var f=u+s-l;if(null!==c&&c!==f||f<0||f>s)break n;var o=t.slice(0,f),b=t.slice(f);if(b!==a)break n;var v=Math.min(u,f),d=g.slice(0,v),p=o.slice(0,v);if(d!==p)break n;var A=g.slice(v),m=o.slice(v);return h(d,A,m,a)}t:if(null===c||c===u){var o=t.slice(0,u),b=t.slice(u);if(o!==g)break t;var w=Math.min(l-u,s-u),y=a.slice(a.length-w),x=b.slice(b.length-w);if(y!==x)break t;var A=a.slice(0,a.length-w),m=b.slice(0,b.length-w);return h(g,A,m,y)}}if(r.length>0&&i&&0===i.length)e:{var d=n.slice(0,r.index),y=n.slice(r.index+r.length),v=d.length,w=y.length;if(s<v+w)break e;var p=t.slice(0,v),x=t.slice(s-w);if(d!==p||y!==x)break e;var A=n.slice(v,l-w),m=t.slice(v,s-w);return h(d,A,m,y)}return null}(n,l,s);if(c)return c}var f=r(n,l),o=n.substring(0,f);n=n.substring(f),l=l.substring(f),f=i(n,l);var b=n.substring(n.length-f);n=n.substring(0,n.length-f),l=l.substring(0,l.length-f);var v=function(n,l){if(!n)return[[1,l]];if(!l)return[[-1,n]];var s,u=n.length>l.length?n:l,g=n.length>l.length?l:n,h=u.indexOf(g);if(-1!==h)return s=[[1,u.substring(0,h)],[0,g],[1,u.substring(h+g.length)]],n.length>l.length&&(s[0][0]=s[2][0]=-1),s;if(1===g.length)return[[-1,n],[1,l]];var a=function(n,t){var e,l,s,u,g,h=n.length>t.length?n:t,a=n.length>t.length?t:n;if(h.length<4||2*a.length<h.length)return null;function c(n,t,e){for(var l,s,u,g,h=n.substring(e,e+Math.floor(n.length/4)),a=-1,c="";-1!==(a=t.indexOf(h,a+1));){var f=r(n.substring(e),t.substring(a)),o=i(n.substring(0,e),t.substring(0,a));c.length<o+f&&(c=t.substring(a-o,a)+t.substring(a,a+f),l=n.substring(0,e-o),s=n.substring(e+f),u=t.substring(0,a-o),g=t.substring(a+f))}return 2*c.length>=n.length?[l,s,u,g,c]:null}var f=c(h,a,Math.ceil(h.length/4)),o=c(h,a,Math.ceil(h.length/2));return f||o?(e=o?f&&f[4].length>o[4].length?f:o:f,n.length>t.length?(l=e[0],s=e[1],u=e[2],g=e[3]):(u=e[0],g=e[1],l=e[2],s=e[3]),[l,s,u,g,e[4]]):null}(n,l);if(a){var c=a[0],f=a[1],o=a[2],b=a[3],v=a[4],d=t(c,o),p=t(f,b);return d.concat([[0,v]],p)}return function(n,t){for(var r=n.length,i=t.length,l=Math.ceil((r+i)/2),s=2*l,u=Array(s),g=Array(s),h=0;h<s;h++)u[h]=-1,g[h]=-1;u[l+1]=0,g[l+1]=0;for(var a=r-i,c=a%2!=0,f=0,o=0,b=0,v=0,d=0;d<l;d++){for(var p=-d+f;p<=d-o;p+=2){for(var A,m=l+p,w=(A=p===-d||p!==d&&u[m-1]<u[m+1]?u[m+1]:u[m-1]+1)-p;A<r&&w<i&&n.charAt(A)===t.charAt(w);)A++,w++;if(u[m]=A,A>r)o+=2;else if(w>i)f+=2;else if(c){var y=l+a-p;if(y>=0&&y<s&&-1!==g[y]){var x=r-g[y];if(A>=x)return e(n,t,A,w)}}}for(var k=-d+b;k<=d-v;k+=2){for(var x,y=l+k,M=(x=k===-d||k!==d&&g[y-1]<g[y+1]?g[y+1]:g[y-1]+1)-k;x<r&&M<i&&n.charAt(r-x-1)===t.charAt(i-M-1);)x++,M++;if(g[y]=x,x>r)v+=2;else if(M>i)b+=2;else if(!c){var m=l+a-k;if(m>=0&&m<s&&-1!==u[m]){var A=u[m],w=l+A-m;if(A>=(x=r-x))return e(n,t,A,w)}}}}return[[-1,n],[1,t]]}(n,l)}(n,l);return o&&v.unshift([0,o]),b&&v.push([0,b]),function n(t,e){t.push([0,""]);for(var l,s=0,h=0,a=0,c="",f="";s<t.length;){if(s<t.length-1&&!t[s][1]){t.splice(s,1);continue}switch(t[s][0]){case 1:a++,f+=t[s][1],s++;break;case -1:h++,c+=t[s][1],s++;break;case 0:var o=s-a-h-1;if(e){if(o>=0&&g(t[o][1])){var b=t[o][1].slice(-1);if(t[o][1]=t[o][1].slice(0,-1),c=b+c,f=b+f,!t[o][1]){t.splice(o,1),s--;var v=o-1;t[v]&&1===t[v][0]&&(a++,f=t[v][1]+f,v--),t[v]&&-1===t[v][0]&&(h++,c=t[v][1]+c,v--),o=v}}if(u(t[s][1])){var b=t[s][1].charAt(0);t[s][1]=t[s][1].slice(1),c+=b,f+=b}}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(c.length>0||f.length>0){c.length>0&&f.length>0&&(0!==(l=r(f,c))&&(o>=0?t[o][1]+=f.substring(0,l):(t.splice(0,0,[0,f.substring(0,l)]),s++),f=f.substring(l),c=c.substring(l)),0!==(l=i(f,c))&&(t[s][1]=f.substring(f.length-l)+t[s][1],f=f.substring(0,f.length-l),c=c.substring(0,c.length-l)));var d=a+h;0===c.length&&0===f.length?(t.splice(s-d,d),s-=d):0===c.length?(t.splice(s-d,d,[1,f]),s=s-d+1):0===f.length?(t.splice(s-d,d,[-1,c]),s=s-d+1):(t.splice(s-d,d,[-1,c],[1,f]),s=s-d+2)}0!==s&&0===t[s-1][0]?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,a=0,h=0,c="",f=""}}""===t[t.length-1][1]&&t.pop();var p=!1;for(s=1;s<t.length-1;)0===t[s-1][0]&&0===t[s+1][0]&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),p=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),p=!0)),s++;p&&n(t,e)}(v,a),v}function e(n,e,r,i){var l=n.substring(0,r),s=e.substring(0,i),u=n.substring(r),g=e.substring(i),h=t(l,s),a=t(u,g);return h.concat(a)}function r(n,t){if(!n||!t||n.charAt(0)!==t.charAt(0))return 0;for(var e=0,r=Math.min(n.length,t.length),i=r,s=0;e<i;)n.substring(s,i)==t.substring(s,i)?s=e=i:r=i,i=Math.floor((r-e)/2+e);return l(n.charCodeAt(i-1))&&i--,i}function i(n,t){if(!n||!t||n.slice(-1)!==t.slice(-1))return 0;for(var e=0,r=Math.min(n.length,t.length),i=r,l=0;e<i;)n.substring(n.length-i,n.length-l)==t.substring(t.length-i,t.length-l)?l=e=i:r=i,i=Math.floor((r-e)/2+e);return s(n.charCodeAt(n.length-i))&&i--,i}function l(n){return n>=55296&&n<=56319}function s(n){return n>=56320&&n<=57343}function u(n){return s(n.charCodeAt(0))}function g(n){return l(n.charCodeAt(n.length-1))}function h(n,t,e,r){return g(n)||u(r)?null:function(n){for(var t=[],e=0;e<n.length;e++)n[e][1].length>0&&t.push(n[e]);return t}([[0,n],[-1,t],[1,e],[0,r]])}function a(n,e,r){return t(n,e,r,!0)}a.INSERT=1,a.DELETE=-1,a.EQUAL=0;let c=new TextEncoder,f=new TextDecoder;class o extends TransformStream{constructor(t){let e=function(t={}){let{tw:e=n.tw,minify:r=n.identity}="function"==typeof t?{tw:t}:t,i="",l=null,s=n.noop;return{push:n=>(i+=n,null===l?i.endsWith("</body></html>"):i.endsWith("</script>")),flush:()=>{if(i){let t=e.snapshot();s();let u=n.consume(i,e),g=r(n.stringify(e.target),u);if(s=e.snapshot(),t(),null===l)u=u.replace("</head>",`<style data-twind>${g}</style></head>`);else{let h=[],c=0;for(let[f,o]of a(l,g))1===f&&h.push([c,o]),c+=o.length;h.length&&(u=`<script>!function(e,n){e&&(e.textContent=n.reduce((function(e,n){return e.slice(0,n[0])+n[1]+e.slice(n[0])}),e.textContent||''))}(document.querySelector('style[data-twind=""]'),${JSON.stringify(h)})</script>${u}`)}return i="",l=g,u}}}}(t),r=n=>{let t=e.flush();t&&n.enqueue(c.encode(t))};super({transform(n,t){if(e.push(f.decode(n)))return r(t)},flush:r})}}return o}(twind.core);//# sourceMappingURL=readableStream.global.js.map
